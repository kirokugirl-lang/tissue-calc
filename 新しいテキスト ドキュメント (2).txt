<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ティッシュペーパー比較ツール（スマホ対応版）</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background: #fafafa;
    padding: 12px 16px 70px; /* 下部ボタンのために余白 */
    margin: 0;
  }
  h2 {
    color: #333;
    text-align: center;
    margin-bottom: 16px;
  }
  .box {
    background: #fff;
    padding: 12px 14px;
    border-radius: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    margin-bottom: 16px;
  }
  .box h3 {
    margin-top: 0;
    margin-bottom: 8px;
    font-weight: 600;
  }
  label {
    display: block;
    font-weight: 600;
    margin-bottom: 4px;
    font-size: 14px;
  }
  input[type=number] {
    width: 100%;
    padding: 6px 8px;
    margin-bottom: 12px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-sizing: border-box;
    text-align: right;
    height: 36px;
  }
  button {
    position: fixed;
    bottom: 12px;
    width: 48%;
    padding: 12px 0;
    font-size: 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    color: white;
    font-weight: 700;
    box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    user-select: none;
  }
  #btnCalculate {
    left: 12px;
    background: #007bff;
  }
  #btnCalculate:hover {
    background: #005fcc;
  }
  #btnSave {
    right: 12px;
    background: #28a745;
  }
  #btnSave:hover {
    background: #1e7e34;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 8px;
    font-size: 14px;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 8px 6px;
    text-align: center;
  }
  @media (min-width: 480px) {
    body {
      max-width: 420px;
      margin: 0 auto;
    }
  }
</style>
<!-- Google Analytics: ここは自分のトラッキングIDに置き換えてください -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX');
</script>
</head>
<body>

<h2>ティッシュペーパー比較ツール</h2>

<div class="box">
  <h3>製品①</h3>
  <label for="set1">組数</label>
  <input id="set1" type="number" min="0" placeholder="例: 150" />
  <label for="pack1">パック数</label>
  <input id="pack1" type="number" min="0" placeholder="例: 100" />
  <label for="height1">縦(cm)</label>
  <input id="height1" type="number" min="0" step="0.01" placeholder="例: 18.3" />
  <label for="width1">横(cm)</label>
  <input id="width1" type="number" min="0" step="0.01" placeholder="例: 20" />
  <label for="price1">価格(円)</label>
  <input id="price1" type="number" min="0" placeholder="例: 5422" />
</div>

<div class="box">
  <h3>製品②</h3>
  <label for="set2">組数</label>
  <input id="set2" type="number" min="0" placeholder="例: 160" />
  <label for="pack2">パック数</label>
  <input id="pack2" type="number" min="0" placeholder="例: 90" />
  <label for="height2">縦(cm)</label>
  <input id="height2" type="number" min="0" step="0.01" placeholder="例: 19" />
  <label for="width2">横(cm)</label>
  <input id="width2" type="number" min="0" step="0.01" placeholder="例: 20" />
  <label for="price2">価格(円)</label>
  <input id="price2" type="number" min="0" placeholder="例: 5980" />
</div>

<table id="result">
  <tr><th>製品</th><th>総面積(㎡)</th><th>1円あたり(㎡)</th><th>1円あたり(枚)</th></tr>
</table>

<button id="btnCalculate">計算する</button>
<button id="btnSave">一時保存</button>

<script>
  // 計算関数
  function calc(set, pack, h, w, price) {
    if (set <= 0 || pack <= 0 || h <= 0 || w <= 0 || price <= 0) return null;
    let area = (h / 100) * (w / 100);
    let total = 2 * set * pack * area;
    let perYenArea = total / price;
    let perYenSheets = perYenArea / area;
    return { total, perYenArea, perYenSheets };
  }

  function fmt(n) {
    return n.toLocaleString(undefined, { maximumFractionDigits: 2 });
  }

  function compare() {
    const set1 = +document.getElementById("set1").value;
    const pack1 = +document.getElementById("pack1").value;
    const height1 = +document.getElementById("height1").value;
    const width1 = +document.getElementById("width1").value;
    const price1 = +document.getElementById("price1").value;

    const set2 = +document.getElementById("set2").value;
    const pack2 = +document.getElementById("pack2").value;
    const height2 = +document.getElementById("height2").value;
    const width2 = +document.getElementById("width2").value;
    const price2 = +document.getElementById("price2").value;

    const data1 = calc(set1, pack1, height1, width1, price1);
    const data2 = calc(set2, pack2, height2, width2, price2);

    const result = document.getElementById("result");

    if (!data1 || !data2) {
      result.innerHTML = `<tr><td colspan="4" style="color:#d00;">全ての入力欄に正の数値を入力してください。</td></tr>`;
      return;
    }

    result.innerHTML = `
      <tr><th>製品</th><th>総面積(㎡)</th><th>1円あたり(㎡)</th><th>1円あたり(枚)</th></tr>
      <tr><td>①</td><td>${fmt(data1.total)}</td><td>${fmt(data1.perYenArea)}</td><td>${fmt(data1.perYenSheets)}</td></tr>
      <tr><td>②</td><td>${fmt(data2.total)}</td><td>${fmt(data2.perYenArea)}</td><td>${fmt(data2.perYenSheets)}</td></tr>
    `;
  }

  // 一時保存機能：入力値をローカルストレージに保存
  function saveInputs() {
    const inputs = {};
    ["set1","pack1","height1","width1","price1","set2","pack2","height2","width2","price2"].forEach(id => {
      inputs[id] = document.getElementById(id).value;
    });
    localStorage.setItem("tissueInputData", JSON.stringify(inputs));
    alert("入力内容を一時保存しました。");
  }

  // ロード時に保存データがあれば読み込む
  function loadInputs() {
    const saved = localStorage.getItem("tissueInputData");
    if (saved) {
      try {
        const inputs = JSON.parse(saved);
        Object.keys(inputs).forEach(id => {
          const el = document.getElementById(id);
          if (el) el.value = inputs[id];
        });
      } catch(e) {
        // エラーは無視
      }
    }
  }

  document.getElementById("btnCalculate").addEventListener("click", compare);
  document.getElementById("btnSave").addEventListener("click", saveInputs);

  // ページ読み込み時に保存データを復元
  window.addEventListener("load", loadInputs);
</script>

</body>
</html>